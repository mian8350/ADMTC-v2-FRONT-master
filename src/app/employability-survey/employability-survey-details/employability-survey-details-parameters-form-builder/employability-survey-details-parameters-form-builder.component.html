<div class="p-grid">
  <div class="p-col-6 paramter-auto-scroll">
    <!-- Parameter form -->
    <div class="top-space">
      <div class="horizontal" style="display: flex; flex-direction: column">
        <div class="addBtn" style="margin-bottom: 10px; margin-left: 10px">
          <button mat-raised-button color="warn" class="mrgn-btn11" (click)="leave()">
            <mat-icon svgIcon="undo-variant" class="mat-icon-svgIcon"></mat-icon>
            {{ 'LEAVE' | translate }}
          </button>
          <button
            mat-raised-button
            class="mrgn-btn11"
            color="accent"
            style="float: right"
            (click)="addESFormGroup()"
            *ngIf="esData?.employability_survey_type === 'continuous'"
          >
            <mat-icon>
              <svg style="width: 24px; height: 24px; padding-bottom: 2px" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
              </svg>
            </mat-icon>
            {{ 'Add Chain of ES' | translate }}
          </button>
          <button
            mat-raised-button
            class="mrgn-btn11"
            color="accent"
            style="float: right"
            *ngIf="esData?.employability_survey_type === 'one_time'"
            [disabled]="(employabilitySurveyForm.valid ? isStudentTableModifiedCheck() && isFormChanged() : true) || isWaitingForResponse"
            matTooltip="{{ 'Save' | translate }}"
            (click)="saveESProcess()"
          >
            <mat-icon class="mat-icon-default">save</mat-icon>
            {{ 'Save' | translate }}
          </button>
        </div>
        <fieldset [formGroup]="employabilitySurveyForm" style="border: none">
          <div class="card-row">
            <ng-container formArrayName="employability_surveys">
              <ng-container *ngFor="let esForm of getESFormArray().controls; let esIndex = index; let lastIndex = last">
                <div class="p-grid" style="margin-bottom: 15px" [formGroupName]="esIndex" #esPanel>
                  <div style="width: 100%">
                    <div class="p-grid yellow-border" style="margin-bottom: 10px; padding: 0">
                      <div class="section-header no-padding">
                        <h3 class="legent-title" *ngIf="esType === 'one_time'">
                          {{ 'One Time Employability Survey' | translate }}
                        </h3>
                        <h3 class="legent-title" *ngIf="esType === 'continuous'">
                          {{ esType | translate }} {{ 'Employability Survey' | translate }}
                          {{ '- ' + (esIndex + 1) }}
                        </h3>
                      </div>
                      <!-- Form Field -->
                      <fieldset [disabled]="esForm.get('is_already_sent').value" style="width: 100%; border: none">
                        <!-- Button here -->
                        <div class="no-padding" style="float: right">
                          <div class="no-padding">
                            <button type="button" mat-icon-button color="warn" *ngIf="esIndex !== 0" (click)="removeESFormGroup(esIndex)">
                              <mat-icon>
                                <svg style="width: 24px; height: 24px" viewBox="0 0 24 24">
                                  <path
                                    fill="currentColor"
                                    d="M17,13H7V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"
                                  />
                                </svg>
                              </mat-icon>
                            </button>
                          </div>
                        </div>
                        <div class="p-col no-padding" style="width: 94%">
                          <!-- Survey Name -->
                          <div class="p-grid" *ngIf="esIndex === 0">
                            <div class="p-col no-padding mrgn-l-10">
                              <mat-form-field class="top-x">
                                <input
                                  matInput
                                  type="text"
                                  required
                                  [attr.disabled]="
                                    esForm.get('is_already_sent').value || esForm?.get('students_already_sent')?.value?.length
                                  "
                                  [formControl]="employabilitySurveyForm.controls['name']"
                                  style="width: 100%"
                                  color="accent"
                                  [placeholder]="'Employability Survey Name' | translate"
                                />
                                <mat-error *ngIf="employabilitySurveyForm?.get('name').hasError('required') && (employabilitySurveyForm?.get('name').dirty || employabilitySurveyForm?.get('name').touched)">
                                  {{ 'This field is required' | translate }}
                                </mat-error>
                              </mat-form-field>
                            </div>
                          </div>
                          <!-- Select Template Name -->
                          <div class="p-grid">
                            <div class="p-col no-padding mrgn-l-10">
                              <mat-form-field class="top-x">
                                <input
                                  required
                                  matInput
                                  type="text"
                                  [attr.disabled]="
                                    esForm.get('is_already_sent').value || esForm?.get('students_already_sent')?.value?.length
                                  "
                                  formControlName="form_builder_id"
                                  style="width: 100%"
                                  color="accent"
                                  [placeholder]="'056_ES.Select Form Template for Employability Survey' | translate"
                                  [matAutocomplete]="listESQuestionaire"
                                  matAutocompletePosition="below"
                                  (keyup)="filterES(esIndex)"
                                />
                                <mat-autocomplete
                                  [panelWidth]="'fit'"
                                  #listESQuestionaire="matAutocomplete"
                                  [displayWith]="displayFn.bind(this)"
                                  #autoCompleteBox
                                >
                                  <mat-option
                                    (click)="saveQuestionnaireID(esIndex, quest)"
                                    *ngFor="let quest of ESQuestionaireListFiltered[esIndex]"
                                    [value]="quest._id"
                                  >
                                    {{ quest.form_builder_name }}
                                  </mat-option>
                                </mat-autocomplete>
                                <mat-error *ngIf="esForm?.get('form_builder_id').hasError('required') && (esForm?.get('form_builder_id').dirty || esForm?.get('form_builder_id').touched)">
                                  {{ 'This field is required' | translate }}
                                </mat-error>
                              </mat-form-field>
                            </div>
                          </div>

                          <!-- Exact Date or Relative Date? -->
                          <div *ngIf="esType === 'continuous'">
                            <mat-radio-group formControlName="date_type">
                              <mat-radio-button
                                [value]="type"
                                *ngFor="let type of dateTypes; let prClIndx = index"
                                style="padding-right: 10px"
                                [disabled]="esForm.get('is_already_sent').value"
                                (change)="onChangeDateType(esIndex, $event)"
                              >
                              {{ '056_ES.' + type | translate }}
                              </mat-radio-button>
                            </mat-radio-group>
                          </div>

                          <!-- Date picker -->
                          <div class="p-grid">
                            <div class="p-col-3">
                              <p style="padding-top: 15px;"> {{ 'Send Date' | translate }}* </p>
                            </div>
                            <div class="p-col-3">
                              <ng-container *ngIf="esType === 'one_time'">
                                <mat-form-field style="margin-bottom: -1.4em">
                                  <input
                                    matInput
                                    readonly
                                    [placeholder]="'056_ES.Date of send' | translate"
                                    [disabled]="esForm.get('is_already_sent').value"
                                    formControlName="send_date"
                                    (click)="pickerStart.open()"
                                    [matDatepicker]="pickerStart"
                                  />
                                  <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
                                  <mat-datepicker #pickerStart></mat-datepicker>
                                </mat-form-field>
                              </ng-container>
                              <ng-container *ngIf="esType === 'continuous'">
                                <div [ngClass]="esForm?.get('date_type')?.value === 'exact_date' ? '' : 'hide-element'">
                                  <div>
                                    <mat-form-field style="margin-bottom: -1.4em">
                                      <input
                                        matInput
                                        readonly
                                        [placeholder]="'056_ES.Date of send' | translate"
                                        [disabled]="esForm.get('is_already_sent').value"
                                        formControlName="send_date"
                                        [required]="esForm.get('date_type').value === 'exact_date'"
                                        (click)="pickerStart.open()"
                                        [matDatepicker]="pickerStart"
                                        (dateChange)="dateSendUpdate(esIndex)"
                                      />
                                      <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
                                      <mat-datepicker #pickerStart></mat-datepicker>
                                      <mat-error *ngIf="esForm?.get('send_date').hasError('required') && (esForm?.get('send_date').dirty || esForm?.get('send_date').touched)">
                                        {{ 'This field is required' | translate }}
                                      </mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div [ngClass]="esForm?.get('date_type')?.value === 'relative_date' ? '' : 'hide-element'">
                                  <div style="display: flex">
                                    <mat-form-field style="margin-bottom: -1.4em">
                                      <input
                                        matInput
                                        [placeholder]="'056_ES.Days' | translate"
                                        [disabled]="esForm.get('is_already_sent').value"
                                        [required]="esForm.get('date_type').value === 'relative_date'"
                                        formControlName="send_date_continuous"
                                        type="number"
                                        max-lenght="3"
                                        (change)="checkSendDateContinuous(esIndex)" 
                                      />
                                      <mat-error *ngIf="esForm?.get('send_date_continuous').hasError('required') && (esForm?.get('send_date_continuous').dirty || esForm?.get('send_date_continuous').touched)">
                                        {{ 'This field is required' | translate }}
                                      </mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                              </ng-container>
                            </div>
                            <div class="p-col" *ngIf="esType === 'continuous' && esForm?.get('date_type')?.value === 'relative_date'">
                              <p style="padding-top: 15px; padding-left: 13px; margin: 0">
                                {{ '056_ES.After_PASS_Decision' | translate }}
                              </p>
                            </div>
                          </div>

                          <div class="p-grid">
                            <div class="p-col-3">
                              <p style="padding-top: 15px;"> {{ 'Expiration Date' | translate }}* </p>
                            </div>
                            <div class="p-col-3">
                              <ng-container *ngIf="esType === 'one_time'">
                                <mat-form-field style="margin-top: 2px; margin-bottom: -1.4em">
                                  <input
                                    matInput
                                    readonly
                                    [placeholder]="'Expiration Date' | translate"
                                    [disabled]="esForm.get('is_already_sent').value"
                                    formControlName="expiration_date"
                                    (click)="pickerExp.open()"
                                    [matDatepicker]="pickerExp"
                                    [min]="esForm.get('send_date').value"
                                  />
                                  <mat-datepicker-toggle matSuffix [for]="pickerExp"></mat-datepicker-toggle>
                                  <mat-datepicker
                                    #pickerExp
                                    [disabled]="esForm.get('is_already_sent').value || !esForm.get('send_date').value"
                                  ></mat-datepicker>
                                </mat-form-field>
                              </ng-container>
                              <ng-container *ngIf="esType === 'continuous'">
                                <div [ngClass]="!dateTypeExpiration[esIndex] || esForm?.get('expiration_date_type')?.value === 'exact_date' ? '' : 'hide-element'">
                                  <div>
                                    <mat-form-field style="margin-top: 2px; margin-bottom: -1.4em">
                                      <input
                                        matInput
                                        readonly
                                        [disabled]="esForm.get('is_already_sent').value"
                                        [required]="!dateTypeExpiration[esIndex] || esForm.get('expiration_date_type').value === 'exact_date'"
                                        [placeholder]="'Expiration Date' | translate"
                                        formControlName="expiration_date"
                                        (click)="pickerExp.open()"
                                        [matDatepicker]="pickerExp"
                                        [min]="esForm.get('send_date').value"
                                        (dateChange)="dateExpUpdate(esIndex)"
                                      />
                                      <mat-datepicker-toggle matSuffix [for]="pickerExp"></mat-datepicker-toggle>
                                      <mat-datepicker #pickerExp [disabled]="esForm.get('is_already_sent').value"></mat-datepicker>
                                      <mat-error *ngIf="esForm?.get('expiration_date').hasError('required') && (esForm?.get('expiration_date').dirty || esForm?.get('expiration_date').touched)">
                                        {{ 'This field is required' | translate }}
                                      </mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                                <div [ngClass]="dateTypeExpiration[esIndex] && esForm?.get('expiration_date_type')?.value === 'relative_date' ? '' : 'hide-element'">
                                  <div style="display: flex">
                                    <mat-form-field style="margin-bottom: -1.4em">
                                      <input
                                        matInput
                                        [placeholder]="'056_ES.Days' | translate"
                                        [disabled]="esForm.get('is_already_sent').value"
                                        [required]="dateTypeExpiration[esIndex] && esForm.get('expiration_date_type').value === 'relative_date'"
                                        formControlName="expiration_date_continous"
                                        type="number"
                                        max-lenght="3"
                                        (change)="checkExpirationDateContinuous(esIndex)" 
                                      />
                                      <mat-error *ngIf="esForm?.get('expiration_date_continous').hasError('required') && (esForm?.get('expiration_date_continous').dirty || esForm?.get('expiration_date_continous').touched)">
                                        {{ 'This field is required' | translate }}
                                      </mat-error>
                                    </mat-form-field>
                                  </div>
                                </div>
                              </ng-container>
                            </div>
                            <div class="p-col" *ngIf="esType === 'continuous' && dateTypeExpiration[esIndex] && esForm?.get('expiration_date_type')?.value === 'relative_date'">
                              <p *ngIf="esType === 'continuous'" style="padding-top: 15px; padding-left: 13px; margin: 0">
                                {{ '056_ES.After student receive the form' | translate }}
                              </p>
                            </div>
                          </div>

                          <!-- <div class="p-grid">
                            <div class="p-col-12" style="padding-left: 0">
                              <div style="display: flex; flex-direction: row; width: 100%">
                                <label style="padding-top: 15px; margin-right: 30px"> {{ 'Send Date' | translate }}* </label>
                                <div [fxFlex]="50" *ngIf="esType === 'one_time'">
                                  <mat-form-field style="margin-bottom: -1.4em">
                                    <input
                                      matInput
                                      readonly
                                      [placeholder]="'056_ES.Date of send' | translate"
                                      [disabled]="esForm.get('is_already_sent').value"
                                      formControlName="send_date"
                                      (click)="pickerStart.open()"
                                      [matDatepicker]="pickerStart"
                                    />
                                    <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
                                    <mat-datepicker #pickerStart></mat-datepicker>
                                  </mat-form-field>
                                </div>
                                <div *ngIf="esType === 'continuous'" style="width: 100%">
                                  <div [ngClass]="esForm?.get('date_type')?.value === 'exact_date' ? '' : 'hide-element'">
                                    <div>
                                      <mat-form-field style="margin-bottom: -1.4em">
                                        <input
                                          matInput
                                          readonly
                                          [placeholder]="'056_ES.Date of send' | translate"
                                          [disabled]="esForm.get('is_already_sent').value"
                                          formControlName="send_date"
                                          [required]="esForm.get('date_type').value === 'exact_date'"
                                          (click)="pickerStart.open()"
                                          [matDatepicker]="pickerStart"
                                          (dateChange)="dateSendUpdate(esIndex)"
                                        />
                                        <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
                                        <mat-datepicker #pickerStart></mat-datepicker>
                                        <mat-error *ngIf="esForm?.get('send_date').hasError('required') && (esForm?.get('send_date').dirty || esForm?.get('send_date').touched)">
                                          {{ 'This field is required' | translate }}
                                        </mat-error>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div [ngClass]="esForm?.get('date_type')?.value === 'relative_date' ? '' : 'hide-element'">
                                    <div style="display: flex">
                                      <mat-form-field style="margin-bottom: -1.4em">
                                        <input
                                          matInput
                                          [placeholder]="'056_ES.Days' | translate"
                                          [disabled]="esForm.get('is_already_sent').value"
                                          [required]="esForm.get('date_type').value === 'relative_date'"
                                          formControlName="send_date_continuous"
                                          type="number"
                                          max-lenght="3"
                                          (change)="checkSendDateContinuous(esIndex)" 
                                        />
                                        <mat-error *ngIf="esForm?.get('send_date_continuous').hasError('required') && (esForm?.get('send_date_continuous').dirty || esForm?.get('send_date_continuous').touched)">
                                          {{ 'This field is required' | translate }}
                                        </mat-error>
                                      </mat-form-field>
                                      <p *ngIf="esType === 'continuous'" style="padding-top: 15px; padding-left: 13px; margin: 0">
                                        {{ '056_ES.After_PASS_Decision' | translate }}
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="p-grid">
                            <div class="p-col-12" style="padding-left: 0">
                              <div style="display: flex; flex-direction: row; width: 100%">
                                <label style="padding-top: 15px; margin-right: 30px"> {{ 'Expiration Date' | translate }}* </label>
                                <div [fxFlex]="50" *ngIf="esType === 'one_time'">
                                  <mat-form-field style="margin-top: 2px; margin-bottom: -1.4em">
                                    <input
                                      matInput
                                      readonly
                                      [placeholder]="'Expiration Date' | translate"
                                      [disabled]="esForm.get('is_already_sent').value"
                                      formControlName="expiration_date"
                                      (click)="pickerExp.open()"
                                      [matDatepicker]="pickerExp"
                                      [min]="esForm.get('send_date').value"
                                    />
                                    <mat-datepicker-toggle matSuffix [for]="pickerExp"></mat-datepicker-toggle>
                                    <mat-datepicker
                                      #pickerExp
                                      [disabled]="esForm.get('is_already_sent').value || !esForm.get('send_date').value"
                                    ></mat-datepicker>
                                  </mat-form-field>
                                </div>
                                <div [fxFlex]="50" *ngIf="esType === 'continuous'">
                                  <div [ngClass]="!dateTypeExpiration[esIndex] || esForm?.get('expiration_date_type')?.value === 'exact_date' ? '' : 'hide-element'">
                                    <div>
                                      <mat-form-field style="margin-top: 2px; margin-bottom: -1.4em">
                                        <input
                                          matInput
                                          readonly
                                          [disabled]="esForm.get('is_already_sent').value"
                                          [required]="!dateTypeExpiration[esIndex] || esForm.get('expiration_date_type').value === 'exact_date'"
                                          [placeholder]="'Expiration Date' | translate"
                                          formControlName="expiration_date"
                                          (click)="pickerExp.open()"
                                          [matDatepicker]="pickerExp"
                                          [min]="esForm.get('send_date').value"
                                          (dateChange)="dateExpUpdate(esIndex)"
                                        />
                                        <mat-datepicker-toggle matSuffix [for]="pickerExp"></mat-datepicker-toggle>
                                        <mat-datepicker #pickerExp [disabled]="esForm.get('is_already_sent').value"></mat-datepicker>
                                        <mat-error *ngIf="esForm?.get('expiration_date').hasError('required') && (esForm?.get('expiration_date').dirty || esForm?.get('expiration_date').touched)">
                                          {{ 'This field is required' | translate }}
                                        </mat-error>
                                      </mat-form-field>
                                    </div>
                                  </div>
                                  <div [ngClass]="dateTypeExpiration[esIndex] && esForm?.get('expiration_date_type')?.value === 'relative_date' ? '' : 'hide-element'">
                                    <div style="display: flex">
                                      <mat-form-field style="margin-bottom: -1.4em">
                                        <input
                                          matInput
                                          [placeholder]="'056_ES.Days' | translate"
                                          [disabled]="esForm.get('is_already_sent').value"
                                          [required]="dateTypeExpiration[esIndex] && esForm.get('expiration_date_type').value === 'relative_date'"
                                          formControlName="expiration_date_continous"
                                          type="number"
                                          max-lenght="3"
                                          (change)="checkExpirationDateContinuous(esIndex)" 
                                        />
                                        <mat-error *ngIf="esForm?.get('expiration_date_continous').hasError('required') && (esForm?.get('expiration_date_continous').dirty || esForm?.get('expiration_date_continous').touched)">
                                          {{ 'This field is required' | translate }}
                                        </mat-error>
                                      </mat-form-field>
                                      <p *ngIf="esType === 'continuous'" style="padding-top: 15px; padding-left: 13px; margin: 0">
                                        {{ '056_ES.After student receive the form' | translate }}
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div> -->
                          <!-- Select Toggle -->
                          <div class="p-grid">
                            <div class="p-col-11 no-padding pt-1">
                              <mat-slide-toggle
                                color="accent"
                                [disabled]="esForm?.get('is_already_sent')?.value"
                                formControlName="is_required_for_certificate"
                              >
                                <span
                                  #tooltip="matTooltip"
                                  matTooltip="{{
                                    (esForm.get('is_required_for_certificate').value
                                      ? '056_ES.ES is required for generating the RNCP Title Certificate'
                                      : '056_ES.ES is not required for generating the RNCP Title Certificate'
                                    ) | translate
                                  }}"
                                  matTooltipPosition="above"
                                  [ngStyle]="{ color: esForm.get('is_required_for_certificate').value ? '#fdd835' : 'white' }"
                                >
                                  {{
                                    (esForm.get('is_required_for_certificate').value
                                      ? '056_ES.ES is required for generating the RNCP Title Certificate'
                                      : '056_ES.ES is not required for generating the RNCP Title Certificate'
                                    ) | translate
                                  }}
                                </span>
                              </mat-slide-toggle>
                            </div>
                          </div>
                          <div class="p-grid">
                            <div class="p-col-11 no-padding" *ngIf="esIndex > 0">
                              <mat-slide-toggle
                                color="accent"
                                [disabled]="esForm?.get('is_already_sent')?.value"
                                formControlName="is_send_es_if_prev_not_answered"
                              >
                                <span
                                  #tooltip="matTooltip"
                                  matTooltip="{{
                                    (esForm.get('is_send_es_if_prev_not_answered').value
                                      ? 'Only send if send date is today and previous ES is completed or validated'
                                      : 'Send the ES if send date is today and Ignore the status of previous ES'
                                    ) | translate
                                  }}"
                                  matTooltipPosition="above"
                                  [ngStyle]="{ color: esForm.get('is_send_es_if_prev_not_answered').value ? '#fdd835' : 'white' }"
                                >
                                  {{
                                    (esForm.get('is_send_es_if_prev_not_answered').value
                                      ? 'Only send if send date is today and previous ES is completed or validated'
                                      : 'Send the ES if send date is today and Ignore the status of previous ES'
                                    ) | translate
                                  }}
                                </span>
                              </mat-slide-toggle>
                            </div>
                          </div>
                          <div class="p-grid">
                            <div class="p-col-11 no-padding" *ngIf="esIndex > 0">
                              <mat-slide-toggle color="accent" [disabled]="esForm?.get('is_already_sent')?.value" formControlName="is_send_es_based_on_prev_question" (change)="onSendBasedOnPrevous($event, esIndex)">
                                <span
                                  #tooltip="matTooltip"
                                  matTooltip="{{ 'Only send based on previous ES answer' | translate }}"
                                  matTooltipPosition="above"
                                  [ngStyle]="{ color: esForm.get('is_send_es_based_on_prev_question').value ? '#fdd835' : 'white' }"
                                >
                                  {{ 'Only send based on previous ES answer' | translate }}
                                </span>
                              </mat-slide-toggle>
                            </div>
                          </div>
                          <div class="p-grid indent-left" *ngIf="esIndex > 0 && esForm.get('is_send_es_based_on_prev_question').value" formArrayName="es_condition_questions">
                            <ng-container *ngFor="let condition_question of getConditionQuestions(esIndex).controls; let conditionQuestionIndex = index; let lastConditionQuestionIndex = last" [formGroupName]="conditionQuestionIndex">
                              <div class="p-col-2 no-padding-bottom">
                                <mat-form-field *ngIf="conditionQuestionIndex > 0">
                                  <mat-label>{{ 'Connection' | translate}}</mat-label>
                                  <mat-select formControlName="connection" [disableOptionCentering]="true" panelClass="filterPanel" [required]="esForm.get('is_send_es_based_on_prev_question').value">
                                    <mat-option value="and">{{ 'And' | translate }}</mat-option>
                                    <mat-option value="or">{{ 'Or' | translate }}</mat-option>
                                  </mat-select>
                                  <mat-error *ngIf="getConditionQuestions(esIndex).at(conditionQuestionIndex).get('connection').hasError('required') && 
                                    (getConditionQuestions(esIndex).at(conditionQuestionIndex).get('connection').dirty || getConditionQuestions(esIndex).at(conditionQuestionIndex).get('connection').touched)"
                                  >
                                    {{ 'This field is required' | translate }}
                                  </mat-error>
                                </mat-form-field>
                              </div>
                              <div class="p-col-4 no-padding-bottom">
                                <mat-form-field color="accent">
                                  <input
                                    type="text"
                                    matInput
                                    [matAutocomplete]="questionAuto"
                                    formControlName="question"
                                    [required]="esForm.get('is_send_es_based_on_prev_question').value"
                                    (keyup)="getFilterConditionQuestion(esIndex, conditionQuestionIndex)"
                                    placeholder="{{ 'Select Question' | translate }}"
                                  >
                                  <mat-autocomplete #questionAuto="matAutocomplete" [panelWidth]="'fit'" [displayWith]="displayConditionQuestion.bind(this, esIndex)">
                                    <ng-container *ngIf="ESConditionQuestionFiltered[esIndex-1] && ESConditionQuestionFiltered[esIndex-1].length && ESConditionQuestionFiltered[esIndex-1][conditionQuestionIndex].length">
                                        <mat-option 
                                        *ngFor="let condition of ESConditionQuestionFiltered[esIndex-1][conditionQuestionIndex]"
                                        [value]="condition?._id"
                                        (click)="clearAnswer(esIndex, conditionQuestionIndex)"
                                        >
                                        {{ condition?.question }}
                                      </mat-option>
                                    </ng-container>
                                  </mat-autocomplete>
                                  <mat-error *ngIf="getConditionQuestions(esIndex).at(conditionQuestionIndex).get('question').hasError('required') && 
                                    (getConditionQuestions(esIndex).at(conditionQuestionIndex).get('question').dirty || getConditionQuestions(esIndex).at(conditionQuestionIndex).get('question').touched)"
                                  >
                                    {{ 'This field is required' | translate }}
                                  </mat-error>
                                </mat-form-field>
                              </div>
                              <div class="p-col-4 no-padding-bottom">
                                <mat-form-field color="accent">
                                  <input
                                    type="text"
                                    matInput
                                    [matAutocomplete]="answerAuto"
                                    formControlName="answer"
                                    [required]="esForm.get('is_send_es_based_on_prev_question').value"
                                    (keyup)="getFilterConditionAnswer(esIndex, conditionQuestionIndex)"
                                    placeholder="{{ 'Select Answer' | translate }}"
                                  >
                                  <mat-autocomplete #answerAuto="matAutocomplete" [panelWidth]="'fit'">
                                    <ng-container *ngIf="ESConditionAnswerFiltered[esIndex-1] && ESConditionAnswerFiltered[esIndex-1].length && ESConditionAnswerFiltered[esIndex-1][conditionQuestionIndex].length">
                                      <ng-container *ngFor="let condition of ESConditionAnswerFiltered[esIndex-1][conditionQuestionIndex]">
                                        <mat-option 
                                          *ngIf="ESConditionAnswerFiltered[esIndex-1][conditionQuestionIndex].length && 
                                          condition?._id === getConditionQuestions(esIndex).at(conditionQuestionIndex).get('question').value &&
                                          condition?.answer !== getConditionQuestions(esIndex).at(conditionQuestionIndex).get('answer').value"
                                          [value]="condition?.answer "
                                          >
                                          {{ condition?.answer }}
                                        </mat-option>
                                      </ng-container>
                                    </ng-container>
                                  </mat-autocomplete>
                                  <mat-error *ngIf="getConditionQuestions(esIndex).at(conditionQuestionIndex).get('answer').hasError('required') && 
                                    (getConditionQuestions(esIndex).at(conditionQuestionIndex).get('answer').dirty || getConditionQuestions(esIndex).at(conditionQuestionIndex).get('answer').touched)"
                                  >
                                    {{ 'This field is required' | translate }}
                                  </mat-error>
                                </mat-form-field>
                              </div>
                              <div class="p-col-2 indent-top no-padding-bottom">
                                <button mat-icon-button class="remove-button" *ngIf="getConditionQuestions(esIndex).length > 1" (click)="removeConditionQuestion(esIndex, conditionQuestionIndex)">
                                  <mat-icon>do_not_disturb_on</mat-icon>
                                </button>
                                <button mat-icon-button class="add-button" *ngIf="lastConditionQuestionIndex" (click)="addConditionQuestion(esIndex)">
                                  <mat-icon>add_circle</mat-icon>
                                </button>
                              </div>
                            </ng-container>
                          </div>
                          <!-- <div class="p-grid">
                              <div class="p-col-11 no-padding" *ngIf="esIndex > 0">
                                <mat-slide-toggle
                                  color="accent"
                                  formControlName="send_only_to_pass_student"
                                  [disabled]="esForm.get('is_already_sent').value || esForm?.get('students_already_sent')?.value?.length"
                                >
                                  <span
                                    #tooltip="matTooltip"
                                    matTooltip="{{
                                      (esForm.get('send_only_to_pass_student').value
                                        ? '056_ES.Only send to Pass Students'
                                        : '056_ES.Send to ALL Students(Admin ou non)'
                                      ) | translate
                                    }}"
                                    matTooltipPosition="above"
                                    [ngStyle]="{ color: esForm.get('send_only_to_pass_student').value ? '#fdd835' : 'white' }"
                                  >
                                    {{
                                      (esForm.get('send_only_to_pass_student').value
                                        ? '056_ES.Only send to Pass Students'
                                        : '056_ES.Send to ALL Students(Admin ou non)'
                                      ) | translate
                                    }}
                                  </span>
                                </mat-slide-toggle>
                              </div>
                            </div> -->
                          <!-- <div class="p-grid">
                              <div class="p-col-11 no-padding" *ngIf="esIndex > 0">
                                <mat-slide-toggle
                                  color="accent"
                                  formControlName="send_only_to_not_mention_continue_study"
                                  [disabled]="esForm.get('is_already_sent').value || esForm?.get('students_already_sent')?.value?.length"
                                >
                                  <span
                                    #tooltip="matTooltip"
                                    matTooltip="{{
                                      (esForm.get('send_only_to_not_mention_continue_study').value
                                        ? '056_ES.Send only to Students who did NOT mention Continue Studies in the Previous Survey'
                                        : '056_ES.Send to ALL Students Situation(even if Continue Studies in Previous Survey)'
                                      ) | translate
                                    }}"
                                    matTooltipPosition="above"
                                    [ngStyle]="{ color: esForm.get('send_only_to_not_mention_continue_study').value ? '#fdd835' : 'white' }"
                                  >
                                    {{
                                      (esForm.get('send_only_to_not_mention_continue_study').value
                                        ? '056_ES.Send only to Students who did NOT mention Continue Studies in the Previous Survey'
                                        : '056_ES.Send to ALL Students Situation(even if Continue Studies in Previous Survey)'
                                      ) | translate
                                    }}
                                  </span>
                                </mat-slide-toggle>
                              </div>
                            </div> -->
                        </div>
                      </fieldset>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-container>
          </div>
        </fieldset>

        <div *ngIf="isFormLoading" class="loading-indicator">
          <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
        </div>
      </div>
    </div>
  </div>

  <div class="p-col-6 table-auto-scroll">
    <!-- Parameter student table -->
    <div class="top-space">
      <div class="horizontal" [ngClass]="esType == 'continuous' ? 'continous-table' : 'non-continous'">
        <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" class="mat-elevation-z8">
          <ng-container matColumnDef="reset">
            <th mat-header-cell *matHeaderCellDef colspan="100%" class="action-header-column">
              <button
                class="btn-left ml-5"
                mat-raised-button
                color="accent"
                *ngIf="esType !== 'continuous'"
                matTooltip="{{ 'Include' | translate }}"
                [disabled]="!selection.hasValue() || isWaitingForResponse"
                (click)="triggerToggleSendSurveyToMultipleStudents()"
              >
                <mat-icon class="mat-icon-default"> add </mat-icon>
                {{ 'Include' | translate }}
              </button>
              <button
                class="btn-left"
                mat-raised-button
                color="accent"
                *ngIf="esType !== 'continuous'"
                matTooltip="{{ 'Exclude' | translate }}"
                [disabled]="!selection.hasValue() || isWaitingForResponse"
                (click)="toggleExcludeSurveyToMultipleStudents()"
              >
                <mat-icon class="mat-icon-default"> remove </mat-icon>
                {{ 'Exclude' | translate }}
              </button>
              <button
                mat-raised-button
                color="accent"
                [disabled]="(employabilitySurveyForm.valid ? isStudentTableModifiedCheck() && isFormChanged() : true) || isWaitingForResponse"
                matTooltip="{{ 'Save' | translate }}"
                (click)="saveESProcess()"
              >
                <mat-icon class="mat-icon-default">save</mat-icon>
                {{ 'Save' | translate }}
              </button>
              <button
                mat-raised-button
                color="accent"
                *ngIf="this.esType === 'one_time'"
                [disabled]="employabilitySurveyForm.invalid || !buttonValidation || checkExpirateDate(getESFormArray()?.at(0)?.get('expiration_date')?.value) || isWaitingForResponse "
                matTooltip="{{ 'Send To Student' | translate }}"
                (click)="sendEStoStudent()"
              >
                <mat-icon class="mat-icon-default">send</mat-icon>
                {{ 'Send To Student' | translate }}
              </button>
              <button
                mat-raised-button
                color="accent"
                *ngIf="this.esType === 'continuous' && !triggered "
                [disabled]="employabilitySurveyForm.invalid || checkExpirateDate(getESFormArray()?.at(0)?.get('expiration_date')?.value)"
                matTooltip="{{ 'Send To Student' | translate }}"
                (click)="sendEStoStudent()"
              >
                <mat-icon class="mat-icon-default">send</mat-icon>
                {{ 'Send To Student' | translate }}
              </button>
              <button mat-raised-button color="primary" matTooltip="{{ 'RESET' | translate }}" (click)="reset()">
                <mat-icon svgIcon="loop" class="mat-icon-svgIcon"></mat-icon>
                {{ 'RESET' | translate }}
              </button>
            </th>
          </ng-container>

          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef class="text-center">
              <mat-checkbox
                (change)="$event ? masterToggle() : null"
                [checked]="(selection.hasValue() && isAllSelected()) || isCheckedAll"
                [indeterminate]="selection.hasValue() && !isCheckedAll"
                [disabled]="isWaitingForResponse"
              >
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row" class="text-center">
              <mat-checkbox
                (click)="$event.stopPropagation()"
                (change)="$event ? selection.toggle(row?.student_id?._id) : null"
                [checked]="selection.isSelected(row?.student_id?._id)"
                (change)="showOptions($event, row, 'one')"
              >
              </mat-checkbox>
            </td>
          </ng-container>

          <ng-container matColumnDef="selectFilter">
            <th mat-header-cell *matHeaderCellDef></th>
          </ng-container>

          <ng-container matColumnDef="schoolFilter">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field>
                <input
                  matInput
                  class="form-field"
                  [matAutocomplete]="schoolFilterAuto"
                  [formControl]="schoolFilter"
                  placeholder="{{ 'search' | translate }}"
                />
                <mat-autocomplete #schoolFilterAuto="matAutocomplete" [panelWidth]="'fit'">
                  <mat-option value="" (click)="setSchoolFilter(null)">{{ 'All' | translate }}</mat-option>
                  <mat-option
                    *ngFor="let school of filteredSchools | async"
                    [value]="school?.short_name"
                    (click)="setSchoolFilter(school?._id)"
                  >
                    {{ school?.short_name }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </th>
          </ng-container>

          <ng-container matColumnDef="studentFilter">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field>
                <input matInput [formControl]="studentNameFilter" placeholder="{{ 'GROUP_TEST_TABLE.SEARCH' | translate }}" />
              </mat-form-field>
            </th>
          </ng-container>
          <ng-container matColumnDef="studentStatusFilter">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field>
                <mat-select [formControl]="studentStatusFilter" placeholder="{{ 'search' | translate }}" [disableOptionCentering]="true" panelClass="filterPanel">
                  <mat-option *ngFor="let list of statusFilterList" [value]="list">
                    {{ list | translate }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </ng-container>

          <ng-container matColumnDef="titleStatusFilter">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field>
                <mat-select [formControl]="titleStatusFilterCtrl" placeholder="{{ 'search' | translate }}" [disableOptionCentering]="true" panelClass="filterPanel">
                  <mat-option [value]="'AllM'">
                    {{ 'AllM' | translate }}
                  </mat-option>
                  <mat-option *ngFor="let list of statusTitleFilterList" [value]="list.value">
                    {{ list.value | translate }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </ng-container>

          <ng-container matColumnDef="finalTranscripResultFilter">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field floatLabel="never">
                <mat-select [formControl]="transcriptResultFilter" placeholder="{{ 'search' | translate }}" [disableOptionCentering]="true" panelClass="filterPanel">
                  <mat-option [value]="'AllM'">
                    {{ 'AllM' | translate }}
                  </mat-option>
                  <mat-option *ngFor="let list of listTranscriptResult" [value]="list.value"> {{ list.name | translate }}</mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </ng-container>

          <ng-container matColumnDef="includedFilter">
            <th mat-header-cell *matHeaderCellDef>
              <mat-form-field floatLabel="never">
                <mat-select [formControl]="includedFilter" placeholder="{{ 'search' | translate }}" [disableOptionCentering]="true" panelClass="filterPanel">
                  <mat-option [value]="'AllM'"> {{ 'All' | translate }}</mat-option>
                  <mat-option *ngFor="let list of includedFilterList" [value]="list.value"> {{ list.name | translate }}</mat-option>
                </mat-select>
              </mat-form-field>
            </th>
          </ng-container>

          <ng-container matColumnDef="school">
            <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'School' | translate }}" matTooltipPosition="above">
              <h5 mat-sort-header="school_name">{{ 'School' | translate }}</h5>
            </th>
            <td
              mat-cell
              *matCellDef="let element"
              matTooltip="{{ element?.school_employability ? element?.school_employability : element?.student_id?.school?.short_name }}"
              matTooltipPosition="above"
              class="pad-l-xs"
            >
              <span> {{ element?.school_employability ? element?.school_employability : element?.student_id?.school?.short_name }} </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="student">
            <th mat-header-cell *matHeaderCellDef matTooltip="{{ 'student' | translate }}" matTooltipPosition="above">
              <h5 mat-sort-header="student_name">{{ 'student' | translate }}</h5>
            </th>
            <td
              mat-cell
              *matCellDef="let element"
              matTooltip="
                  {{ element?.student_id?.last_name }} 
                  {{ element?.student_id?.first_name }}
                  {{ element?.student_id?.civility | translate }}"
              matTooltipPosition="above"
              class="pad-l-xs"
            >
              <span>
                {{ element?.student_id?.last_name }} {{ element?.student_id?.first_name }}
                {{ element?.student_id?.civility | translate }}</span
              >
            </td>
          </ng-container>
          <ng-container matColumnDef="studentStatus">
            <th
              mat-sort-header="student_status"
              mat-header-cell
              *matHeaderCellDef
              matTooltip="{{ 'STATUS' | translate }}"
              matTooltipPosition="above"
            >
              <span placement="above">
                <mat-icon class="icon-lock" svgIcon="lock-check-outline"></mat-icon>
              </span>
            </th>
            <td mat-cell *matCellDef="let element" matTooltipPosition="above" class="pad-l-xs">
              <mat-icon
                *ngIf="!element.student_id?.incorrect_email"
                matTooltip="{{ element?.student_id?.status | translate }}"
                matTooltipPosition="above"
                [ngClass]="{
                  'active-color': element.student_id?.status === 'active',
                  'deactivated-color': element.student_id?.status === 'pending'
                }"
              >
                check_circle
              </mat-icon>
              <mat-icon
                *ngIf="element.student_id?.incorrect_email"
                matTooltip="{{ 'incorrect_email' | translate }}"
                matTooltipPosition="above"
                class="red-icon"
              >
                check_circle
              </mat-icon>
            </td>
          </ng-container>

          <ng-container matColumnDef="titleStatus">
            <th
              mat-header-cell
              mat-sort-header="student_title_status"
              *matHeaderCellDef
              matTooltip="{{ 'STATUS' | translate }}"
              matTooltipPosition="above"
            >
              <!-- <h5 mat-sort-header="student_title_status">{{ 'STATUS' | translate }}</h5> -->
              <h5>{{ 'STATUS' | translate }}</h5>
            </th>
            <td mat-cell *matCellDef="let element" matTooltipPosition="above" class="pad-l-xs">
              <mat-icon
                matTooltip="{{ element?.student_id?.student_title_status | translate }}"
                matTooltipPosition="above"
                [ngClass]="{
                  'active-color': element.student_id?.student_title_status === 'current_active',
                  'deactivated-color': element.student_id?.student_title_status === 'deactivated',
                  'completed-color': element.student_id?.student_title_status === 'completed',
                  'suspended-color': element.student_id?.student_title_status === 'suspended',
                  'retake-color': element.student_id?.student_title_status === 'retaking',
                  'admission-color': element.student_id?.student_title_status === 'admission'
                }"
              >
                check_circle
              </mat-icon>
            </td>
          </ng-container>

          <ng-container matColumnDef="finalTranscripResult">
            <th
              mat-header-cell
              *matHeaderCellDef
              matTooltip="{{ 'Final Transcript Result' | translate }}"
              matTooltipPosition="above"
              mat-sort-header="final_transcript_result"
            >
              <span placement="above">
                <!-- <img class="icon-certifier" src="assets/icons/gavel.svg" alt="" /> -->
                <mat-icon class="mat-icon-default" svgIcon="gavel" style="width: 22px !important"></mat-icon>
              </span>
            </th>
            <td mat-cell *matCellDef="let element" matTooltipPosition="above" class="pad-l-xs">
              <div
                style="cursor: pointer"
                style="text-align: center; padding-bottom: 2px;"
                *ngIf="element?.student_id?.final_transcript_id?.jury_decision_for_final_transcript"
                [ngSwitch]="element?.student_id?.final_transcript_id?.jury_decision_for_final_transcript"
              >
                <i
                  *ngSwitchCase="'failed'"
                  style="color: red"
                  class="fa fa-circle statusIcon"
                  aria-hidden="true"
                  matTooltip="{{ 'FINAL_TRANSCRIPT.FINAL_RESULT_FAIL' | translate }}"
                  matTooltipPosition="right"
                ></i>
                <i
                  *ngSwitchCase="'eliminated'"
                  style="color: red"
                  class="fa fa-circle statusIcon"
                  aria-hidden="true"
                  matTooltip="{{ 'FINAL_TRANSCRIPT.ELIMINATED' | translate }}"
                  matTooltipPosition="right"
                ></i>
                <div *ngSwitchCase="'retaking'">
                  <ng-template [ngIf]="!element?.student_id?.final_transcript_id?.after_final_retake_decision">
                    <i
                      *ngIf="
                        element?.student_id?.final_transcript_id?.student_decision === 'retaking' ||
                        element?.student_id?.final_transcript_id?.student_decision === ''
                      "
                      style="color: orange"
                      class="fa fa-circle statusIcon"
                      aria-hidden="true"
                      matTooltip="{{ 'FINAL_TRANSCRIPT.RETAKE' | translate }}"
                      matTooltipPosition="right"
                    ></i>
                    <i
                      *ngIf="element?.student_id?.final_transcript_id?.student_decision === 'failed'"
                      style="color: red"
                      class="fa fa-circle statusIcon"
                      aria-hidden="true"
                      matTooltip="{{ 'FINAL_TRANSCRIPT.FINAL_RESULT_FAIL' | translate }}"
                      matTooltipPosition="right"
                    ></i>
                  </ng-template>

                  <ng-template [ngIf]="element?.student_id?.final_transcript_id?.after_final_retake_decision">
                    <!-- If Jury has not Finally Decided -->
                    <span *ngIf="!element?.student_id?.final_transcript_id?.has_jury_finally_decided; else decisonDone">
                      <i
                        *ngIf="
                          element?.student_id?.final_transcript_id?.student_decision === 'retaking' ||
                          element?.student_id?.final_transcript_id?.student_decision === ''
                        "
                        style="color: orange"
                        class="fa fa-circle statusIcon"
                        aria-hidden="true"
                        matTooltip="{{ 'FINAL_TRANSCRIPT.RETAKE' | translate }}"
                        matTooltipPosition="right"
                      ></i>
                      <i
                        *ngIf="element?.student_id?.final_transcript_id?.student_decision === 'failed'"
                        style="color: red"
                        class="fa fa-circle statusIcon"
                        aria-hidden="true"
                        matTooltip="{{ 'FINAL_TRANSCRIPT.FINAL_RESULT_FAIL' | translate }}"
                        matTooltipPosition="right"
                      ></i>
                    </span>
                    <!-- / -->

                    <ng-template #decisonDone>
                      <!-- If Jury has Finally Decided -->
                      <i
                        *ngIf="
                          getFinalResultAfterReTake(element?.student_id?.final_transcript_id?.after_final_retake_decision) === 'FAILED'
                        "
                        style="color: red"
                        class="fa fa-circle statusIcon"
                        aria-hidden="true"
                        matTooltip="{{ 'FINAL_TRANSCRIPT.FINAL_RESULT_FAIL' | translate }}"
                        matTooltipPosition="right"
                      ></i>
                      <i
                        *ngIf="getFinalResultAfterReTake(element?.student_id?.final_transcript_id?.after_final_retake_decision) === 'PASS'"
                        style="color: greenyellow"
                        class="fa fa-circle statusIcon"
                        aria-hidden="true"
                        matTooltip="{{ 'ES_FINAL_TRANSCRIPT.PASS' | translate }}"
                        matTooltipPosition="right"
                      ></i>
                      <!-- / -->
                    </ng-template>
                  </ng-template>
                </div>
                <i
                  *ngSwitchCase="'pass'"
                  style="color: greenyellow"
                  class="fa fa-circle statusIcon"
                  aria-hidden="true"
                  matTooltip="{{ 'ES_FINAL_TRANSCRIPT.PASS' | translate }}"
                  matTooltipPosition="right"
                ></i>
                <i *ngSwitchDefaul aria-hidden="true"></i>
              </div>
            </td>
          </ng-container>

          <ng-container matColumnDef="included">
            <th
              mat-header-cell
              *matHeaderCellDef
              matTooltip="{{ 'Included' | translate }}"
              matTooltipPosition="above"
              style="text-align: start"
            >
              <h5 mat-sort-header="included">{{ 'Included' | translate }}</h5>
            </th>
            <td mat-cell *matCellDef="let element">
              <mat-icon
                class="black-icon"
                *ngIf="element.is_send_to_student && element?.is_already_generated && !element?.is_already_send_to_student"
                matTooltip="{{ 'Generated' | translate }}"
                >check_circle</mat-icon
              >
                <mat-icon
                class="green-icon"
                *ngIf="element.is_send_to_student && element?.is_already_generated && element?.is_already_send_to_student"
                matTooltip="{{ 'Send To Student' | translate }}"
                >check_circle</mat-icon
              >
              <ng-container *ngIf="!element?.is_already_generated">
                <mat-slide-toggle [(ngModel)]="element.is_send_to_student" (change)="onStudentIncludedToggle(element)"></mat-slide-toggle>
              </ng-container>
            </td>
          </ng-container>

          <ng-container matColumnDef="loading">
            <th mat-header-cell *matHeaderCellDef colspan="100%" class="text-center">
              <div class="center-spinner">
                <mat-spinner color="accent"></mat-spinner>
              </div>
            </th>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['reset']"></tr>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-header-row *matHeaderRowDef="filterColumns"></tr>
          <tr mat-header-row *matHeaderRowDef="['loading']" [hidden]="!isWaitingForResponse"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns" [hidden]="isWaitingForResponse"></tr>
        </table>
        <div *ngIf="noData | async" class="no-records" [ngClass]="{ hide: isWaitingForResponse }">
          {{ 'NOT RECORD FOUND' | translate }}
        </div>
        <mat-paginator [pageSize]="10" [pageSizeOptions]="[10]" [length]="dataCount" showFirstLastButtons></mat-paginator>
      </div>
    </div>
  </div>
</div>

<div *ngIf="loadingDropdown" class="loading-indicator">
  <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
